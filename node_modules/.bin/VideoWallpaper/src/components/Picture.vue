<template>
    <div class="main">
        <div>
            <div class="col-xs-6 col-md-2 thumbnail imgDiv" v-for="(value, key) in pictureList" >
                <img :src="value.urlThumb" alt="..." height="150">
            </div>
        </div>
        <page class='page' :total='total' :pageNum='activePage' @changePage='changePage'></page>
        <pop></pop>
    </div>
</template>

<script>
import page from "@/components/Page";
import pop from "@/components/Pop";

export default {
    name: 'Picture',
    components: {
        page,
        pop,
    },
    data () {
        return {
            pictureData: [],
            pictureList: [],
            total: 1,
            activePage: 1,
            pageSize:30
        } 
    },
    methods: {
        changePage: function(data){
            this.activePage = data.page;
            this.getPageData({pageNum: this.activePage, pageSize: this.pageSize})
        },
        getPageData: function(data) {
            $.ajax({
                type: "post",
                url: this.$store.state.ajaxUrl + "wallpaperspider/query.do",
                data: data,
                success: (result) => {
                    if(result.status == 0){
                        var data = result.data;
                        this.pictureData = data;
                        this.pictureList = data.list;
                        this.total = data.pages;
                        this.activePage = data.pageNum;
                    }
                },
                error: function(result) {
                    console.log("error:" + resule)
                }
            });
        }
    },
    mounted: function(){
        this.getPageData({pageNum: this.activePage, pageSize: this.pageSize})
    }
}
</script>

<style scoped>
    .imgList{
        width: 100px;
        height: 100px;
    }

    .main{
        height: 100%;
        overflow: auto;
    }

    .page{
        position: fixed;
        bottom: 0;
        right: 3vw;
    }

    .imgDiv{
        height: 150px;
        overflow: hidden;
        cursor: pointer;
    }
</style>
