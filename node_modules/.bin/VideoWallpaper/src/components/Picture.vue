<template>
    <div class="main">
        <page class='page' :total='total' :pageNum='activePage' @changePage='changePage'></page>
    </div>
</template>

<script>
import page from "@/components/Page";

export default {
    name: 'Picture',
    components: {
        page,
    },
    data () {
        return {
            pictureData:[],
            total: 1,
            activePage: 1,
            pageSize:32
        } 
    },
    methods: {
        changePage: function(data){
            this.activePage = data.page;
            this.getPageData({pageNum: this.activePage, pageSize: this.pageSize})
        },
        getPageData: function(data) {
            $.ajax({
                type: "post",
                url: this.$store.state.ajaxUrl + "wallpaperspider/query.do",
                data: data,
                success: (result) => {
                    if(result.status == 0){
                        var data = result.data;
                        this.pictureData = data;
                        this.total = data.pages;
                        this.activePage = data.pageNum;
                    }
                },
                error: function(result) {
                    console.log("error:" + resule)
                }
            });
        }
    },
    mounted: function(){
        this.getPageData({pageNum: this.activePage, pageSize: this.pageSize})
    }
}
</script>

<style scoped>
    .imgList{
        width: 100px;
        height: 100px;
    }

    .main{
        height: 100%;
    }

    .page{
        position: fixed;
        bottom: 0;
        right: 3vw;
    }
</style>
