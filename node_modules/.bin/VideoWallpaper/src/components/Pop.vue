<template>
    <div class="alertDiv" v-if="popShow">
        <div class="row mainDiv">
            <div class="imgDiv col-md-6">
                <img :src="popPictureData.url" class=" popPicture">
            </div>
            
            <div class="infoDiv col-md-6">
                <div class="info">
                    <div class="form-group text-left">
                        <label>标题/title:</label>
                        <input type="text" class="form-control" placeholder="title" />
                    </div>
                    <div class="form-group text-left">
                        <label>描述/description:</label>
                        <input type="text" class="form-control" placeholder="description" />
                    </div>
                    <div class="form-group text-left">
                        <label>分类/category:</label>
                        <select class="form-control" @click.stop="initialCateGory">
                            <option v-for="(value, key) in category" :value="value.id">{{JSON.parse(value.title).zhrCN}}</option>
                        </select>
                    </div>
                    <div class="form-group text-left">
                        <label>
                            购买/Purchase:
                            <input type="checkbox" />
                        </label>
                    </div>
                    <div class="form-group text-left">
                        <label>宽度/width:</label>
                        <input type="text" class="form-control" placeholder="width" disabled />
                    </div>
                    <div class="form-group text-left">
                        <label>高度/height:</label>
                        <input type="text" class="form-control" placeholder="height" disabled />
                    </div>
                    <div class="form-group text-left">
                        <label>大小/size:</label>
                        <input type="text" class="form-control" placeholder="size" disabled />
                    </div>
                    
                </div>
            </div>
        </div>

        <button type="button" class="close closeBtn" aria-label="Close" @click="closeFunc"><span aria-hidden="true">&times;</span></button>
    </div>
</template>

<script>
export default {
    name: 'pop',
    props: ['popShow','popPictureData'],
    data () {
        return {
            category: [],
        }
    },
    created: function(){
        document.onkeydown = (e) => {
            if(e.keyCode == 27){
                this.closeFunc();
            }
        }
    },
    methods: {
        closeFunc: function(){
            this.$emit('popReturn', {show: false});
        },
        initialImg: function(){
            let newImg = new Image();
            newImg.src = this.popPictureData.url;

            newImg.onload = function(e) {
                console.log(newImg.width + "," + newImg.height);
                console.log(newImg);
            }


        },
        initialCateGory: function(){
            $.ajax({
                type: "post",
                url: this.$store.state.ajaxUrl + "category/query.do",
                success: (result) => {
                    if(result.status == 0){
                        var data = result.data;
                        this.category = data.list;
                    }
                },
                error: function(result) {
                    console.log("error:" + result);
                }
            });
        }
    },
    watch: {
        popPictureData: function(){
            // console.log(this.popPictureData);
            this.initialImg();
            this.initialCateGory();
        }
    }
}
</script>

<style scoped>
    .alertDiv{
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,.9); 
    }

    .closeBtn{
        position: fixed;
        top: 0;
        right: 0;
        margin: 12px;
        width: 24px;
        height: 24px;
        background-color: #fff;
        border-radius: 12px; 
    }

    .closeBtn:hover{
        opacity: 1;
    }

    .mainDiv{
        height: 100%;
        position: relative;
        overflow: auto;
    }

    .imgDiv{
        height: 100%;
        padding: 5%;
    }

    .popPicture{
        max-width: 100%;
        max-height: 100%
    }

    .infoDiv{
        height: 100%;
    }

    .info{
        height: 90%;
        width: 90%;
        margin: 5%;
        padding: 5%;
        background: #fff;
        border-radius: 10px;
        overflow: auto;
    }
</style>
